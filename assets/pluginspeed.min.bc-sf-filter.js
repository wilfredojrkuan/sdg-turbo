function buildItemCollectionGroupThumbClass(e,t){var i=e<t?e:e%t;return 0==i?"omega":1==i?"alpha":""}function buildTopPagination(e){var t=Math.ceil(e.total_product/bcsffilter.queryParams.limit),i='<span class="breadcrumb-divider">/</span> '+bcSfFilterConfig.label.breadcrumb_page.replace(/{{ current_page }}/g,bcsffilter.queryParams.page).replace(/{{ pages }}/g,t);jQ("#bc-sf-filter-top-pagination").html(i)}function buildDefaultLink(e,t){var i=window.location.href.split("?")[0];return i+="?"+e+"="+t}var bcSfFilterSettings={general:{limit:bcSfFilterConfig.custom.products_per_page,loadProductFirst:!0},template:{loadMoreLoading:'<div id="bc-sf-filter-load-more-loading"><div class="load-more__icon" style="width: 44px; height: 44px; opacity: 1;"></div></div>'}},bcSfFilterTemplate={saleLabelHtml:'<div class="sale_banner thumbnail_banner">'+bcSfFilterConfig.label.sale+"</div>",newLabelHtml:'<div class="new_banner thumbnail_banner">'+bcSfFilterConfig.label["new"]+"</div>",preorderLabelHtml:'<div class="new_banner thumbnail_banner">'+bcSfFilterConfig.label.pre_order+"</div>",quickViewBtnHtml:'<span data-fancybox-href="#product-{{itemId}}" class="quick_shop ss-icon" data-gallery="product-{{itemId}}-gallery">&#x002B;</span>',newRowHtml:'<br class="clear product_clear" />',productGridItemHtml:'<div class="{{itemColumnNumberClass}} {{itemCollectionGroupThumbClass}} thumbnail {{itemCollectionGroupSmallClass}}" itemprop="itemListElement" itemscope itemtype="http://schema.org/Product""><div class="product-wrap"><div class="relative product_image swap-'+bcSfFilterConfig.custom.secondary_image+'"><a href="{{itemUrl}}" itemprop="url">{{itemImages}}</a><div class="thumbnail-overlay"><a href="{{itemUrl}}" itemprop="url" class="hidden-product-link">{{itemTitle}}</a><div class="info">{{itemProductInfoHover}}</div></div><div class="banner_holder">{{itemSaleLabel}}{{itemNewLabel}}{{itemPreorderLabel}}</div></div><a class="product-info__caption {{itemHiddenClass}}" href="{{itemUrl}}" itemprop="url">{{itemProductInfo}}</a></div>{{itemColorSwatches}}</div>{{itemNewRow}}',previousHtml:'<span class="prev"><a href="{{itemUrl}}">\xab '+bcSfFilterConfig.label.paginate_prev+"</a></span>",nextHtml:'<span class="next"><a href="{{itemUrl}}">'+bcSfFilterConfig.label.paginate_next+" \xbb</a></span>",pageItemHtml:'<span class="page"><a href="{{itemUrl}}">{{itemTitle}}</a></span>',pageItemSelectedHtml:'<span class="page current">{{itemTitle}}</span>',pageItemRemainHtml:"<span>{{itemTitle}}</span>",paginateHtml:"{{previous}}{{pageItems}}{{next}}",sortingHtml:"{{sortingItems}}"};BCSfFilter.prototype.buildProductGridItem=function(e,t){var i=e.images_info,a=!e.available,r=e.compare_at_price_min>e.price_min,l=e.price_min!=e.price_max,o=e.variants[0];if(null!==getParam("variant")&&""!=getParam("variant")){var n=e.variants.filter(function(e){return e.id==getParam("variant")});"undefined"!=typeof n[0]&&(o=n[0])}else for(var s=0;s<e.variants.length;s++)if(e.variants[s].available){o=e.variants[s];break}var c=bcSfFilterTemplate.productGridItemHtml,p=r?"sale":"",m=a?"out_of_stock":"in_stock",f="",u=buildItemCollectionGroupThumbClass(t,bcSfFilterConfig.custom.products_per_row),d="",g="",b=(t-1)%2==0?"even":"odd";if(bcSfFilterConfig.custom.sidebar)switch(bcSfFilterConfig.custom.products_per_row){case 2:f="six columns";break;case 3:f="four columns";break;default:f="three columns"}else switch(bcSfFilterConfig.custom.products_per_row){case 2:f="eight columns";break;case 3:f="one-third column";break;case 4:f="four columns";break;case 5:f="one-fifth column";break;case 6:f="one-sixth column";break;default:f="one-seventh column"}c=c.replace(/{{itemColumnNumberClass}}/g,f),c=c.replace(/{{itemCollectionGroupThumbClass}}/g,u),c=c.replace(/{{itemCollectionGroupLargeClass}}/g,d),c=c.replace(/{{itemCollectionGroupMediumClass}}/g,g),c=c.replace(/{{itemCollectionGroupSmallClass}}/g,b);var h=a?bcSfFilterTemplate.soldOutLabelHtml:"";c=c.replace(/{{itemSoldOutLabel}}/g,h);var v=bcSfFilterConfig.custom.sale_banner_enabled&&r?bcSfFilterTemplate.saleLabelHtml:"";c=c.replace(/{{itemSaleLabel}}/g,v);var _=e.collections.filter(function(e){return"new"==e.handle}),S=e.collections.filter(function(e){return"pre-order"==e.handle}),F=e.collections.filter(function(e){return"coming-soon"==e.handle});if(e.collections){var C="undefined"!=typeof _[0]?bcSfFilterTemplate.newLabelHtml:"";c=c.replace(/{{itemNewLabel}}/g,C);var y="undefined"!=typeof F[0]?bcSfFilterTemplate.comingsoonLabelHtml:"";c=c.replace(/{{itemComingsoonLabel}}/g,y);var w="undefined"!=typeof S[0]?bcSfFilterTemplate.preorderLabelHtml:"";c=c.replace(/{{itemPreorderLabel}}/g,w)}var I=bcSfFilterConfig.custom.thumbnail_hover_enabled?"hidden":"";c=c.replace(/{{itemHiddenClass}}/g,I);var T='data-src="'+this.getFeaturedImage(i,"900x")+'" ';T+='data-srcset=" '+this.getFeaturedImage(i,"300x")+" 300w,",T+=this.getFeaturedImage(i,"400x")+" 400w,",T+=this.getFeaturedImage(i,"500x")+" 500w,",T+=this.getFeaturedImage(i,"600x")+" 600w,",T+=this.getFeaturedImage(i,"700x")+" 700w,",T+=this.getFeaturedImage(i,"800x")+" 800w,",T+=this.getFeaturedImage(i,"900x")+' 900w"';var H=this.getFeaturedImage(i,"100x"),x=i.length>1?this.optimizeImage(i[1].src):this.getFeaturedImage(i,"900x");itemImagesHtml='<img src="'+H+'" alt="{{itemTitle}}" class="lazyload '+bcSfFilterConfig.custom.image_loading_style+'" data-sizes="auto" '+T+" />",bcSfFilterConfig.custom.secondary_image&&(itemImagesHtml+='<img src="'+x+'" class="secondary lazyload" />'),c=c.replace(/{{itemImages}}/g,itemImagesHtml);var P=void 0===F?bcSfFilterConfig.label.coming_soon:this.formatMoney(o.money),L=null!==e.description?'data-full-description="'+this.escape(e.description.split("<!-- split -->")[0])+'"':"data-full-description",k=null!==e.description?'data-regular-description="'+this.escape(this.truncateByWord(e.description,bcSfFilterConfig.custom.description_words).replace("Description","").replace("Dimensions","").replace("Details","").replace("Specs","").replace("Shipping","").replace("Size",""))+'"':"data-regular-description",j="";for(var Q in i)j+=i[Q].id+" || "+e.title+" ||";var q="";for(var Q in e.collections)q+=e.collections[Q].handle,Q<e.collections.length-1&&(q+=",");var U='<span class="quick_shop ss-icon js-quick-shop-link" data-no-instant data-remodal-target="quick-shop" data-id="{{itemId}}" data-handle="{{itemHandle}}" data-money-format="'+this.moneyFormat+'" data-formatted-price="'+P+'" data-url="{{itemUrl}}" data-title="{{itemTitle}}" data-details-text="'+this.escape(bcSfFilterConfig.label.view_detail)+'" '+L+" "+k+' data-images="'+j+'" data-collection-handles="'+q+'">'+bcSfFilterConfig.label.quick_shop+"</span>",D="";bcSfFilterConfig.custom.thumbnail_hover_enabled&&bcSfFilterConfig.custom.quick_shop_enabled?(D+="{{itemProductInfo}}",D+=U):bcSfFilterConfig.custom.thumbnail_hover_enabled?D+="{{itemProductInfo}}":bcSfFilterConfig.custom.quick_shop_enabled&&(D+=U),c=c.replace(/{{itemProductInfoHover}}/g,D);var B='<div class="product-details">';B+='<span class="title" itemprop="name">{{itemTitle}}</span>',B+="{{itemReview}}",B+="{{itemVendor}}",B+="{{itemPrice}}",B+="</div>",c=c.replace(/{{itemProductInfo}}/g,B);var O="";bcSfFilterConfig.custom.enable_shopify_review_comments&&bcSfFilterConfig.custom.enable_shopify_collection_badges&&(O='<span class="shopify-product-reviews-badge" data-id="{{itemId}}"></span>'),c=c.replace(/{{itemReview}}/g,O);var G="";bcSfFilterConfig.custom.vendor_enable&&(G='<span itemprop="brand" class="brand">'+e.vendor+"</span>"),c=c.replace(/{{itemVendor}}/g,G);var z="";"undefined"!=typeof F[0]?z+='<span class="modal_price">'+bcSfFilterConfig.label.coming_soon+"</span>":(z+='<span class="price '+p+'" itemprop="offers" itemscope itemtype="http://schema.org/Offer">',z+='<meta itemprop="price" content="'+this.formatMoney(e.price_min,this.moneyFormat)+'" />',z+='<meta itemprop="priceCurrency" content="'+bcSfFilterConfig.shop.currency+'" />',z+='<meta itemprop="seller" content="'+bcSfFilterConfig.shop.name+'" />',z+='<meta itemprop="availability" content="'+m+'" />',z+='<meta itemprop="itemCondition" content="New" />',a?z+='<span class="sold_out">'+bcSfFilterConfig.label.sold_out+"</span>":(l&&e.price_min>0&&(z+="<small><em>"+bcSfFilterConfig.label.from_price+"</em></small> "),e.price_min>0?z+='<span class="money">'+this.formatMoney(e.price_min)+"</span>":z+=bcSfFilterConfig.label.free_price),r&&(z+=' <span class="was_price"><span class="money">'+this.formatMoney(e.compare_at_price_max)+"</span></span>"),z+="</span>"),c=c.replace(/{{itemPrice}}/g,z);var A="";if(bcSfFilterConfig.custom.collection_swatches)for(var Q in e.options){var E=e.options[Q],M=E.toLowerCase(),R=["color","colour","farve"];if(R.indexOf(M)>-1){var N=Q,V=[];A+='<div class="collection_swatches">';for(var s in e.variants){var W=e.variants[s],J=W.options[N];if(-1==V.indexOf(J)){var V=V.join(",");V+=","+J,V=V.split(",");var K=bcSfFilterConfig.general.asset_url.replace("bc-sf-filter.js",this.slugify(J)+".png");K=this.optimizeImage(K,"50x"),A+='<a href="'+this.buildProductItemUrl(e)+"?variant="+W.id+'" class="swatch" data-swatch-name="meta-'+M+"_"+J.replace(/\s/g,"_").toLowerCase()+'">',A+="<span ",2==bcSfFilterConfig.custom.products_per_row?A+='data-image="'+this.optimizeImage(W.image,"600x")+'" ':2==bcSfFilterConfig.custom.products_per_row?A+='data-image="'+this.optimizeImage(W.image,"500x")+'" ':A+='data-image="'+this.optimizeImage(W.image,"400x")+'" ',A+='style="background-image: url('+K+"); background-color: "+this.slugify(J.split(" ").pop())+';">',A+="</span>",A+="</a>"}}A+="</div>"}}c=c.replace(/{{itemColorSwatches}}/g,A);var X=t%bcSfFilterConfig.custom.products_per_row==0?bcSfFilterTemplate.newRowHtml:"";return c=c.replace(/{{itemNewRow}}/g,X),c=c.replace(/{{itemId}}/g,e.id),c=c.replace(/{{itemHandle}}/g,e.handle),c=c.replace(/{{itemTitle}}/g,e.title),c=c.replace(/{{itemUrl}}/g,this.buildProductItemUrl(e))},BCSfFilter.prototype.buildPagination=function(e){var t=parseInt(this.queryParams.page),i=Math.ceil(e/this.queryParams.limit);if(1==i)return jQ(this.selector.pagination).html(""),!1;if("default"==this.getSettingValue("general.paginationType")){var a=bcSfFilterTemplate.paginateHtml,r=t>1?bcSfFilterTemplate.previousHtml:"";r=r.replace(/{{itemUrl}}/g,this.buildToolbarLink("page",t,t-1)),a=a.replace(/{{previous}}/g,r);var l=t<i?bcSfFilterTemplate.nextHtml:"";l=l.replace(/{{itemUrl}}/g,this.buildToolbarLink("page",t,t+1)),a=a.replace(/{{next}}/g,l);for(var o=[],n=t-1;n>t-3&&n>0;n--)o.unshift(n);t-4>0&&o.unshift("..."),t-4>=0&&o.unshift(1),o.push(t);for(var s=[],c=t+1;c<t+3&&c<=i;c++)s.push(c);t+3<i&&s.push("..."),t+3<=i&&s.push(i);for(var p="",m=o.concat(s),f=0;f<m.length;f++)"..."==m[f]?p+=bcSfFilterTemplate.pageItemRemainHtml:p+=m[f]==t?bcSfFilterTemplate.pageItemSelectedHtml:bcSfFilterTemplate.pageItemHtml,p=p.replace(/{{itemTitle}}/g,m[f]),p=p.replace(/{{itemUrl}}/g,this.buildToolbarLink("page",t,m[f]));a=a.replace(/{{pageItems}}/g,p),jQ(this.selector.pagination).html(a)}},BCSfFilter.prototype.buildFilterSorting=function(){if(bcSfFilterTemplate.hasOwnProperty("sortingHtml")){jQ(this.selector.topSorting).html("");var e=this.getSortingList();if(e){var t="";for(var i in e)t+='<option value="'+i+'">'+e[i]+"</option>";var a=bcSfFilterTemplate.sortingHtml.replace(/{{sortingItems}}/g,t);jQ(this.selector.topSorting).html(a),jQ(this.selector.topSorting).val(this.queryParams.sort)}}},BCSfFilter.prototype.buildSortingEvent=function(){var e=this;jQ(this.selector.topSorting).change(function(t){onInteractWithToolbar(t,"sort",e.queryParams.sort,jQ(this).val())})},BCSfFilter.prototype.buildBreadcrumb=function(e,t){if(void 0!==e&&e.hasOwnProperty("collection")){var i=e.collection,a='<span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a href="'+bcSfFilterConfig.shop.url+'" title="'+bcSfFilterConfig.shop.name+'" itemprop="item" class="breadcrumb_link"><span itemprop="name">'+bcSfFilterConfig.label.breadcrumb_home+"</span></a></span> ";a+='<span class="breadcrumb-divider">/</span> <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a href="{{currentCollectionLink}}" title="{{currentCollectionTitle}}" itemprop="item" class="breadcrumb_link"><span itemprop="name">{{currentCollectionTitle}}</span></a></span> ';var r="";if(Array.isArray(bcSfFilterConfig.general.current_tags)){var l=bcSfFilterConfig.general.current_tags;for(var o in l){var n=l[o];r+='<span class="breadcrumb-divider">/</span>',r+='<span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a href="/collections/{{currentCollectionLink}}/'+this.slugify(n)+'" title="'+n+'" itemprop="item"><span itemprop="name">'+n+"</span></a></span>"}}a+=r,a=a.replace(/{{currentCollectionLink}}/g,"/collections/"+i.handle).replace(/{{currentCollectionTitle}}/g,i.title),a+=' <span id="bc-sf-filter-top-pagination"></span>',jQ(".breadcrumb_text").html(a),buildTopPagination(t)}},BCSfFilter.prototype.buildExtrasProductList=function(){bcSfFilterConfig.custom.quick_shop_enabled&&jQ(".product_image").each(function(){var e=this,t=jQ(this).find(" > a").eq(0).attr("href");jQ.ajax({type:"GET",url:t+"?view=quickview",success:function(t){jQ(e).find("div.info").append(t)}})})},BCSfFilter.prototype.buildAdditionalElements=function(e){jQ("#bc-sf-filter-tree").find("a").attr("data-no-instant",""),jQ("#bc-sf-filter-products").children().hasClass("product-list")&&jQ("#bc-sf-filter-products").children().children().unwrap(),buildTopPagination(e)},BCSfFilter.prototype.buildDefaultElements=function(){if(bcSfFilterConfig.general.hasOwnProperty("collection_count")&&jQ("#bc-sf-filter-bottom-pagination").length>0){var e=bcSfFilterConfig.general.collection_count,t=parseInt(this.queryParams.page),i=Math.ceil(e/this.queryParams.limit);if(1==i)return jQ(this.selector.pagination).html(""),!1;if("default"==this.getSettingValue("general.paginationType")){var a=bcSfFilterTemplate.paginateHtml,r="";r=t>1?bcSfFilterTemplate.hasOwnProperty("previousActiveHtml")?bcSfFilterTemplate.previousActiveHtml:bcSfFilterTemplate.previousHtml:bcSfFilterTemplate.hasOwnProperty("previousDisabledHtml")?bcSfFilterTemplate.previousDisabledHtml:"",r=r.replace(/{{itemUrl}}/g,buildDefaultLink("page",t-1)),a=a.replace(/{{previous}}/g,r);var l="";l=t<i?bcSfFilterTemplate.hasOwnProperty("nextActiveHtml")?bcSfFilterTemplate.nextActiveHtml:bcSfFilterTemplate.nextHtml:bcSfFilterTemplate.hasOwnProperty("nextDisabledHtml")?bcSfFilterTemplate.nextDisabledHtml:"",l=l.replace(/{{itemUrl}}/g,buildDefaultLink("page",t+1)),a=a.replace(/{{next}}/g,l);for(var o=[],n=t-1;n>t-3&&n>0;n--)o.unshift(n);t-4>0&&o.unshift("..."),t-4>=0&&o.unshift(1),o.push(t);for(var s=[],c=t+1;c<t+3&&c<=i;c++)s.push(c);t+3<i&&s.push("..."),t+3<=i&&s.push(i);for(var p="",m=o.concat(s),f=0;f<m.length;f++)"..."==m[f]?p+=bcSfFilterTemplate.pageItemRemainHtml:p+=m[f]==t?bcSfFilterTemplate.pageItemSelectedHtml:bcSfFilterTemplate.pageItemHtml,p=p.replace(/{{itemTitle}}/g,m[f]),p=p.replace(/{{itemUrl}}/g,buildDefaultLink("page",m[f]));a=a.replace(/{{pageItems}}/g,p),jQ(this.selector.pagination).html(a)}}if(bcSfFilterTemplate.hasOwnProperty("sortingHtml")&&jQ(this.selector.topSorting).length>0){jQ(this.selector.topSorting).html("");var u=this.getSortingList();if(u){var d="";for(var g in u)d+='<option value="'+g+'">'+u[g]+"</option>";var b=bcSfFilterTemplate.sortingHtml.replace(/{{sortingItems}}/g,d);jQ(this.selector.topSorting).html(b);var h=void 0!==this.queryParams.sort_by?this.queryParams.sort_by:this.defaultSorting;jQ(this.selector.topSorting+" select").val(h),jQ(this.selector.topSorting+" select").change(function(){window.location.href=buildDefaultLink("sort_by",jQ(this).val())})}}},BCSfFilter.prototype.prepareProductData=function(e){for(var t=0;t<e.length;t++){e[t].images=e[t].images_info,e[t].images.length>0?e[t].featured_image=e[t].images[0]:e[t].featured_image={src:bcSfFilterConfig.general.no_image_url,width:"",height:"",aspect_ratio:0},e[t].url="/products/"+e[t].handle;for(var i=[],a=0;a<e[t].options_with_values.length;a++)i.push(e[t].options_with_values[a].name);e[t].options=i,e[t].price_min*=100,e[t].price_max*=100,e[t].compare_at_price_min*=100,e[t].compare_at_price_max*=100,e[t].price=e[t].price_min,e[t].compare_at_price=e[t].compare_at_price_min,e[t].price_varies=e[t].price_min!=e[t].price_max;var r=e[t].variants[0];if(null!==getParam("variant")&&""!=getParam("variant")){var l=e.variants.filter(function(e){return e.id==getParam("variant")});"undefined"!=typeof l[0]&&(r=l[0])}else for(var a=0;a<e[t].variants.length;a++)if(e[t].variants[a].available){r=e[t].variants[a];break}e[t].selected_or_first_available_variant=r;for(var a=0;a<e[t].variants.length;a++){var o=[],n=e[t].variants[a],s=n.merged_options;if(Array.isArray(s)){for(var c=0;c<s.length;c++){var p=s[c].split(":");e[t].variants[a]["option"+(parseInt(c)+1)]=p[1],e[t].variants[a]["option_"+p[0]]=p[1],o.push(p[1])}e[t].variants[a].options=o}e[t].variants[a].compare_at_price=100*parseFloat(e[t].variants[a].compare_at_price),e[t].variants[a].price=100*parseFloat(e[t].variants[a].price)}e[t].description=e[t].content=e[t].body_html}return e};